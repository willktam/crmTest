<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="http://www.skyve.org/xml/module" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" title="Sales" name="sales" xsi:schemaLocation="http://www.skyve.org/xml/module ../../schemas/module.xsd">
    <homeRef>list</homeRef>
    <homeDocument>Lead</homeDocument>
    <documents>
        <document ref="Lead" defaultQueryName="qLead"/>
        <document ref="Opportunity" defaultQueryName="qOpportunity"/>
        <document ref="Quote" defaultQueryName="qQuote"/>
        <document ref="Order" defaultQueryName="qOrder"/>
        <document ref="Invoice" defaultQueryName="qInvoice"/>
        <document ref="ContactDetail" moduleRef="customers"/>
        <document ref="Account" moduleRef="customers"/>
        <document ref="ProductInfo" moduleRef="products"/>
        <document ref="ProductPriceList" moduleRef="products"/>
        <document ref="ProductUnitGroup" moduleRef="products"/>
        <document ref="Interaction" moduleRef="customers"/>
	</documents>
    <roles>
        <role name="Staff">
            <description><![CDATA[Staff Member - A staff member who can work on jobs]]></description>
            <privileges>
                <document name="Lead" permission="CRUDU">
                	<action name="AddInteraction"/>
                </document>
                <document permission="CRUDU" name="Opportunity" />
                <document permission="CRUDU" name="Quote"></document>
            </privileges>
        </role>
        <role name="LeadManager">
            <description><![CDATA[Lead Manager - Who can manage all leads]]></description>
            <privileges>
                <document name="Lead" permission="CRUDC">
                	<action name="AddInteraction"/>
                </document>
            </privileges>
        </role>
        <role name="OpportunityManager">
        	<description><![CDATA[Opportunity Manager - Who can manage all opportunities]]></description>
        	<privileges>
        		<document permission="CRUDC" name="Opportunity" >
        			<action name="AddInteraction"/>
        		</document>
        	</privileges>
        </role>
        <role name="QuoteManager">
        	<description><![CDATA[Quote Manager - Who can manage all quotes]]></description>
        	<privileges>
        		<document permission="CRUDC" name="Quote" >
        			<action name="AddInteraction"/>
        		</document>
        	</privileges>
        </role>
        <role name="OrderManager">
        	<description><![CDATA[Order Manager - Who can manage all orders]]></description>
        	<privileges>
        		<document permission="CRUDC" name="Order" >
        			<action name="AddInteraction"/>
       			</document>
        	</privileges>
        </role>
        <role name="InvoiceManager">
        	<description><![CDATA[Invoice Manager - Who can manage all invoices]]></description>
        	<privileges>
        		<document permission="CRUDC" name="Invoice" />
        	</privileges>
        </role>
    </roles>
    <menu>
        <list document="Lead" name="Leads">
            <role name="Staff"/>
            <role name="LeadManager" />
        </list>
        <map name="Leads Map" document="Lead" geometryBinding="companyLocation" model="LeadMap">
        	<role name="Staff"/>
        	<role name="LeadManager"/>
        </map>
        <list document="Opportunity" name="Opportunities">
        	<role name="OpportunityManager"/>
        	<role name="Staff"/>
        </list>
        <list document="Quote" name="Quotes">
        	<role name="Staff"/>
			<role name="QuoteManager"/>
        </list>
        <list document="Order" name="Orders">
        	<role name="Staff"/>
			<role name="OrderManager"/>
        </list>
        <list document="Invoice" name="Invoices">
        	<role name="Staff"/>
			<role name="InvoiceManager"/>
        </list>
    </menu>
    <queries>
    	<query documentName="Lead" name="qLead">
    		<description><![CDATA[All Leads]]></description>
    		<columns>
    			<column binding="contactDetails.firstName" displayName="Contact First Name"/>
    			<column binding="contactDetails.lastName" displayName="Contact Last Name"/>
    			<column binding="name" />
    			<column binding="website" />
    			<column binding="street" />
    			<column binding="city" />
    			<column binding="companyLocation" hidden="true"/>
    		</columns>
    	</query>
    	<query documentName="Opportunity" name="qOpportunity">
    		<description><![CDATA[All Opportunities]]></description>
    		<columns>
    			<column binding="topic" />
    			<column binding="contact.firstName" displayName="Contact First Name"/>
    			<column binding="contact.lastName" displayName="Contact Last Name"/>
    			<column binding="account.accountName" displayName="Account Name" />
    			<column binding="product.name" displayName="Product Name"/>
    			<column binding="description" />
    		</columns>
    	</query>
    	<query documentName="Quote" name="qQuote" >
    		<description><![CDATA[All Quotes]]></description>
    		<columns>
    			<column binding="quoteId" />
    			<column binding="name" />
    			<column binding="opportunity.topic" displayName="Opportunity Topic" />
    			<column binding="expireDate" />
    			<column binding="status" />
    		</columns>
    	</query>
    	<query documentName="Order" name="qOrder">
    		<description><![CDATA[All Orders]]></description>
    		<columns>
    			<column binding="orderId" />
    			<column binding="name" />
    			<column binding="opportunity.topic" displayName="Opportunity Topic" />
    			<column binding="quote.name" />
    		</columns>
    	</query>
    	<query documentName="Invoice" name="qInvoice">
    		<description><![CDATA[All Invoices]]></description>
    		<columns>
    			<column binding="invoiceId" />
    			<column binding="name" />
    			<column binding="order.name" />
    			<column binding="order.orderId" />
    			<column binding="dueDate" />
    		</columns>
    	</query>
    </queries>
</module>