<?xml version="1.0" encoding="UTF-8"?>
<document xmlns="http://www.skyve.org/xml/document" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="Account" xsi:schemaLocation="http://www.skyve.org/xml/document ../../../schemas/document.xsd">
    <persistent name="CUS_Account"/>
    <singularAlias>Account</singularAlias>
    <pluralAlias>Accounts</pluralAlias>
    <iconStyleClass>fa fa-book</iconStyleClass>
    <bizKey expression="{accountName}"/>
    <attributes>
    	<association type="aggregation" name="currentUser" >
			<displayName>Current User</displayName>
			<documentName>User</documentName>
		</association>
		<text required="true" name="accountManager">
			<displayName>Account Manager</displayName>
			<description><![CDATA[The manager of this account]]></description>
			<length>200</length>
		</text>
        <text required="true" name="accountName">
            <displayName>Account Name</displayName>
            <description><![CDATA[The account name]]></description>
            <length>200</length>
        </text>
        <text required="true" name="email">
            <displayName>Email</displayName>
            <description><![CDATA[The account email address]]></description>
            <length>300</length>
            <validator regularExpression="^[^@]+@[^@]+$" type="email"/>
        </text>
        <text name="website">
            <displayName>Website</displayName>
            <description><![CDATA[The account website]]></description>
            <length>300</length>
        </text>
        <text name="phone">
            <displayName>Phone</displayName>
            <description><![CDATA[The account phone number]]></description>
            <length>20</length>
        </text>
        <text name="fax">
            <displayName>Fax</displayName>
            <description><![CDATA[The account fax number]]></description>
            <length>20</length>
        </text>
        <enum required="true" name="relationshipType">
            <displayName>Relationship Type</displayName>
            <description><![CDATA[The type of relationship for the account]]></description>
            <values>
                <value code="Customer"/>
                <value code="Supplier"/>
                <value code="Other"/>
            </values>
        </enum>
        <date name="startDate">
            <displayName>Start Date</displayName>
            <description><![CDATA[The date the account began]]></description>
        </date>
        <text name="street">
            <displayName>Street</displayName>
            <description><![CDATA[The account's street and number]]></description>
            <length>200</length>
        </text>
        <text name="city">
            <displayName>City</displayName>
            <description><![CDATA[The account's city]]></description>
            <length>100</length>
        </text>
        <text name="state">
            <displayName>State or Province</displayName>
            <description><![CDATA[The account's state or province]]></description>
            <length>100</length>
        </text>
        <text name="postCode">
            <displayName>ZIP or Postal Code</displayName>
            <description><![CDATA[The account's ZIP or postal code]]></description>
            <length>10</length>
        </text>
        <text name="country">
            <displayName>Country/Region</displayName>
            <description><![CDATA[The account's country or region]]></description>
            <length>100</length>
        </text>
        <geometry name="location">
        	<displayName>Location</displayName>
        </geometry>
        <association type="aggregation" name="primaryContact">
            <displayName>Primary Contact</displayName>
            <description><![CDATA[The account's primary contact]]></description>
            <documentName>ContactDetail</documentName>
        </association>  
        
        <collection name="interactions" type="composition">
        	<displayName>Interactions</displayName>
        	<documentName>Interaction</documentName>
        	<minCardinality>0</minCardinality>
        	<ordering>
        		<order sort="descending" by="interactionTime"/>
        	</ordering>
        </collection>
        
        <!-- quick add interaction attributes -->
		<memo name="interactionDescription" persistent="false">
			<displayName>Description</displayName>
		</memo>
		<enum name="interactionType" documentRef="Interaction" attributeRef="type" persistent="false">
			<displayName>Type</displayName>
		</enum>
		
		<text name="line1">
            <displayName>Line 1</displayName>
            <description><![CDATA[The account's street]]></description>
            <length>100</length>
        </text>
        <text name="line2">
            <displayName>Line 2</displayName>
            <description><![CDATA[The account's street]]></description>
            <length>100</length>
        </text>
        <text name="suburb">
            <displayName>Suburb</displayName>
            <description><![CDATA[The account's suburb]]></description>
            <length>100</length>
        </text>
              
    </attributes>
    <conditions>
        <condition name="hasCurrent">
            <expression><![CDATA[primaryContact != null]]></expression>
        </condition>
    </conditions>
</document>